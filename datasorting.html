<!DOCTYPE html>

<html lang="en">

<head>
  <title>SS23 datasorting</title>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
  
</head>
<body>
</body>
<script>
function initialise_firebase(){
  const firebaseConfig = {
          apiKey: "AIzaSyBOOdW1SHCwBZSchUJ7DfJZ1a7-dEYTvuQ",
          authDomain: "crowdcount-678c8.firebaseapp.com",
          databaseURL: "https://crowdcount-678c8-default-rtdb.europe-west1.firebasedatabase.app",
          projectId: "crowdcount-678c8",
          storageBucket: "crowdcount-678c8.appspot.com",
          messagingSenderId: "1020533758948",
          appId: "1:1020533758948:web:23ec6e175dff3b5eedc5f1",
          measurementId: "G-00674BETEZ"
          };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  
  
        }  
initialise_firebase()


database = firebase.database();

ref = database.ref('/soundstorm/swipes');

ref.once('value', (snapshot) => {
  swipes_arr = snapshot.val()
  console.log('working')
console.log(swipes_arr)

})


refdata = 
{
  "Big Beast Circle": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908600000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669911000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669913220000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669914960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669916460000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669918020000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669919400000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 30,
      "zeit": 1669921860000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 30,
      "zeit": 1669924020000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 40,
      "zeit": 1669927080000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 65,
      "zeit": 1669930380000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 40,
      "zeit": 1669936560000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669950000000
    },
    {
      "density": 1,
      "tension": 2,
      "usage": 40,
      "zeit": 1669939680000
    },
    {
      "density": 1,
      "tension": 4,
      "usage": 25,
      "zeit": 1669944960000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 20,
      "zeit": 1669946400000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 20,
      "zeit": 1669946400000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 35,
      "zeit": 1669941900000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Big Beast Left": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908600000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669911000000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 10,
      "zeit": 1669914900000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669916400000
    },
    {
      "density": 3,
      "tension": 2,
      "usage": 30,
      "zeit": 1669917960000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 55,
      "zeit": 1669919340000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 65,
      "zeit": 1669922100000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 70,
      "zeit": 1669923000000
    },
    {
      "density": 5,
      "tension": 5,
      "usage": 70,
      "zeit": 1669924020000
    },
    {
      "density": 5,
      "tension": 4,
      "usage": 65,
      "zeit": 1669927080000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 60,
      "zeit": 1669929780000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 80,
      "zeit": 1669932780000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 70,
      "zeit": 1669936560000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669950000000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 40,
      "zeit": 1669938540000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 35,
      "zeit": 1669939620000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 30,
      "zeit": 1669944960000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 15,
      "zeit": 1669946340000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 15,
      "zeit": 1669946340000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 40,
      "zeit": 1669941780000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Big Beast Right": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669892400000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669908600000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669911000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669913160000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669913160000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669914960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669916460000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 25,
      "zeit": 1669917960000
    },
    {
      "density": 3,
      "tension": 2,
      "usage": 40,
      "zeit": 1669919400000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 60,
      "zeit": 1669922100000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 70,
      "zeit": 1669923000000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 70,
      "zeit": 1669924020000
    },
    {
      "density": 5,
      "tension": 6,
      "zeit": 1669925340000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 65,
      "zeit": 1669927080000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 60,
      "zeit": 1669929780000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 80,
      "zeit": 1669932780000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 70,
      "zeit": 1669936560000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669950000000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669950000000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 40,
      "zeit": 1669938540000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 35,
      "zeit": 1669939620000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 35,
      "zeit": 1669944960000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 25,
      "zeit": 1669946400000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 25,
      "zeit": 1669946400000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 40,
      "zeit": 1669941840000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Dance Tent": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 2,
      "zeit": 1669910640000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669912620000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 10,
      "zeit": 1669913940000
    },
    {
      "density": 1,
      "tension": 2,
      "usage": 5,
      "zeit": 1669915800000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669917960000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 30,
      "zeit": 1669919820000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669921260000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 40,
      "zeit": 1669921920000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 30,
      "zeit": 1669922940000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669924980000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669926600000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 40,
      "zeit": 1669927440000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669929300000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669937580000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 70,
      "zeit": 1669937880000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 85,
      "zeit": 1669938480000
    },
    {
      "density": 4,
      "tension": 5,
      "usage": 90,
      "zeit": 1669938780000
    },
    {
      "density": 4,
      "tension": 5,
      "usage": 90,
      "zeit": 1669939800000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 50,
      "zeit": 1669945500000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669947300000
    },
    {
      "density": 4,
      "tension": 5,
      "usage": 85,
      "zeit": 1669941240000
    },
    {
      "density": 4,
      "tension": 4,
      "usage": 85,
      "zeit": 1669942440000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 40,
      "zeit": 1669942680000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 45,
      "zeit": 1669944660000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Down Beast": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669909620000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669910880000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669912980000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669915740000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669918020000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 3,
      "zeit": 1669919640000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 4,
      "zeit": 1669922100000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 20,
      "zeit": 1669923840000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669926300000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 5,
      "zeit": 1669928580000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 2,
      "zeit": 1669930200000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 30,
      "zeit": 1669933200000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 45,
      "zeit": 1669934760000
    },
    {
      "density": 4,
      "tension": 3,
      "usage": 65,
      "zeit": 1669936200000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 20,
      "zeit": 1669940400000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669944300000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "MDL Town": [
    {
      "density": 1,
      "tension": 1,
      "usage": 0,
      "zeit": 1669912680000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669914780000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669916460000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 15,
      "zeit": 1669920300000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669922520000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669924380000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669926000000
    },
    {
      "density": 1,
      "tension": 2,
      "usage": 20,
      "zeit": 1669926780000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 40,
      "zeit": 1669928640000
    },
    {
      "density": 3,
      "tension": 4,
      "usage": 50,
      "zeit": 1669931040000
    },
    {
      "density": 3,
      "tension": 3,
      "usage": 25,
      "zeit": 1669933320000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 20,
      "zeit": 1669936080000
    },
    {
      "density": 2,
      "tension": 3,
      "usage": 40,
      "zeit": 1669939080000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 15,
      "zeit": 1669943940000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669946160000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Underground 1": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669910640000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669913160000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669914120000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669917960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669919700000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669921920000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669923000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 15,
      "zeit": 1669924740000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669926480000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 20,
      "zeit": 1669928340000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669930200000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669932300000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 60,
      "zeit": 1669933860000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 50,
      "zeit": 1669935780000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 60,
      "zeit": 1669938600000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669940880000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Underground 2": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669910640000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669914120000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669917960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669919700000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 15,
      "zeit": 1669921920000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669923000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669924740000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669926480000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 35,
      "zeit": 1669928340000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669930200000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669932300000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 60,
      "zeit": 1669933860000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 50,
      "zeit": 1669935780000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 60,
      "zeit": 1669938600000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 60,
      "zeit": 1669940880000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669945080000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Underground 3": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669910640000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669914120000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669917960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669919700000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669921920000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 5,
      "zeit": 1669923000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669924740000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 15,
      "zeit": 1669926480000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669928340000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669930200000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669932300000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 40,
      "zeit": 1669933860000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 65,
      "zeit": 1669935780000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 50,
      "zeit": 1669938600000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 50,
      "zeit": 1669940880000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669945080000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ],
  "Underground 4": [
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669899600000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669906800000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669908960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669910640000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669914120000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669917960000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 10,
      "zeit": 1669919700000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669921920000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 1,
      "zeit": 1669923000000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 15,
      "zeit": 1669924740000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669926480000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 20,
      "zeit": 1669928340000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669930200000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 70,
      "zeit": 1669932300000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 40,
      "zeit": 1669933860000
    },
    {
      "density": 2,
      "tension": 2,
      "usage": 50,
      "zeit": 1669935780000
    },
    {
      "density": 2,
      "tension": 1,
      "usage": 50,
      "zeit": 1669938600000
    },
    {
      "density": 1,
      "tension": 1,
      "usage": 30,
      "zeit": 1669940880000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 0,
      "zeit": 1669945080000
    },
    {
      "density": 0,
      "tension": 0,
      "usage": 1,
      "zeit": 1669950000000
    }
  ]
}
function generateTimeArray(startTime) {
  
  const timeArray = [new Date(startTime)]; // Start with the provided time

  for (let i = 1; i < 53; i++) {
    const nextTime = new Date(timeArray[i - 1]);
    nextTime.setMinutes(nextTime.getMinutes() + 15);
    timeArray.push(nextTime);
  }

  return timeArray;
}


stages_list=[   
  {name:  "Big Beast Circle"  ,capacity: 50598,short: "bc",coords: [[24.997638615382215,46.511081509102944],[24.99792601670823,46.51124412784849],[24.99780810855323,46.51230114969455],[24.9976902002851,46.51231741156911],[24.997380690542993,46.512138530949],[24.99718171958286,46.512089745325326],[24.996916424468168,46.512081614388045],[24.996621651446826,46.51213040001171],[24.996319508366117,46.512309280631825],[24.996120535687822,46.51252881593832],[24.995980517684004,46.51275648218209],[24.995899454556266,46.51300041030041],[24.99586997704202,46.51317929092051],[24.995855238282264,46.51342321903882],[24.99588471580002,46.51364275434531],[24.995906823933726,46.513756587467206],[24.994941431723856,46.51372406371811],[24.994934062288507,46.512732089370246],[24.995354119398044,46.512854053429415],[24.99552361571992,46.5122117093845],[24.995162514578816,46.51207348345076],[24.99534674998746,46.511731984085145],[24.995693111808013,46.511910864705214],[24.99593630143914,46.511658805649624],[24.996164751866377,46.51155310346502],[24.996348985772553,46.51151244877864],[24.99658480476944,46.51147992502951],[24.996732191412704,46.510951414106486],[24.996968009674223,46.51093515223192],[24.996850100600014,46.51150431784136],[24.996901685833905,46.51160188908868],[24.9973659519644,46.511731984085145],[24.997483860543667,46.51171572221057],[24.99761650756008,46.51109777097747]]},
  {name:  "Big Beast Left"    ,capacity:12370,short:"bl",coords:[[  24.996361809598593,  46.512442182994086],[  24.996660427002674,  46.51287728855099],[  24.9966754532778,  46.51296016997636],[  24.996647308825978,  46.51304094647664],[  24.996051902612145,  46.51349679431619],[  24.996031271297884,  46.5135879200315],[  24.995950097610567,  46.51365049770028],[  24.995879140200252,  46.513138343114605],[  24.995969258098956,  46.512775769768055],[  24.99607444202483,  46.51282133262571],[  24.996123297295014,  46.512790241128044],[  24.996142060262898,  46.51270117648522]]},
  {name:  "Big Beast Right"   ,capacity:11838,short:"br",coords:[[  24.997496213866462,  46.51234272528364],[  24.997462424623457,  46.512382104923844],[  24.997462424623457,  46.512382104923844],[  24.996853900232928,  46.51286071226591],[  24.99678628199486,  46.51285448519586],[  24.996729913587117,  46.51283168184073],[  24.996442585765404,  46.51237171185622],[  24.996752452999804,  46.51222669128812],[  24.99682007123787,  46.51223497943065],[  24.996872663200808,  46.51219770471554],[  24.996859545024112,  46.51203816893485],[  24.997199464808762,  46.51209201993504],[  24.997404187869332,  46.51221011500304]]},
{name:  "Dance Tent",       short:"dt",capacity:7410,coords:[  [24.995517953068532,46.50557166365157 ],  [24.99541038401962,46.50623243471903 ],  [24.9945125839569,46.506078599777126 ],  [24.9945458166712,46.50597747566765 ],  [24.994660024312562,46.505901303691 ],  [24.99471046966477,46.505691819792055 ],  [24.99467330149746,46.505514523705926 ],  [24.994641420352885,46.50548523016511 ],  [24.99465736092517,46.505409058188455 ]]},
{name:  "Down Beast",       short:"db",capacity:21686,coords:[  [24.99749060882733,46.5046973742454 ],  [24.99754316103822,46.504778194598295 ],  [24.997753528889973,46.50482586238104 ],  [24.99796389674173,46.50499162523178 ],  [24.99797514657205,46.505064113589526 ],  [24.998080330497928,46.505057886519474 ],  [24.998292566696062,46.505420503718625 ],  [24.998194895907744,46.5060441316288 ],  [24.998022093743803,46.50614152826676 ], [24.99784933133191,46.50617051483934],  [24.99781927878166,46.50594883991592 ], [24.997590147962022,46.50594883991592],[24.99730278038826,46.50584109406294], [24.997083031052565,46.50565669385464 ],  [24.99694405788368,46.505403927433555 ],  [24.996750584653427,46.50549093100389 ],  [24.996658558656296,46.5052133001552 ],  [24.996645400727548,46.504989520306694 ],  [24.99667736137623,46.50477407245333 ]]},
{name:  "MDL Town",short:"mt",capacity:30898,coords:[[  24.99630281755551,  46.506951749015535],[  24.996487426078478,  46.506995733179366],[  24.996588356534943,  46.50706019651021],[  24.996665396009,  46.507143691872066],[  24.996729118546106,  46.507219863848725],[  24.996784930425143,  46.507335590876],[  24.996860618329478,  46.50749236394251],[  24.996893811291727,  46.5076183524796],[  24.996892499474058,  46.50781906585734],[  24.996863281716866,  46.508030040744885],[  24.99681677181767,  46.508180937562194],[  24.996739772095665,  46.50829083219287],[  24.99665076725438,  46.50838020380393],[  24.996571104144984,  46.508431467500365],[  24.99646619848346,  46.5084739606756],[  24.996377193642175,  46.508460761041185],[  24.996233768243624,  46.508418267865956],[  24.996078377477843,  46.5083362196401],[  24.995989412388607,  46.50822049261282],[  24.99591372448427,  46.50809888933633],[  24.995871189790133,  46.50799780907946],[  24.995822056255594,  46.50786155903257],[  24.995802140478247,  46.507707724090665],[  24.99580611568331,  46.50753630425374],[  24.995861927562345,  46.507306297335184],[  24.99594958083391,  46.50712461598845],[  24.996067763680333,  46.507010379949776],[  24.996193936688925,  46.50694881089093] ]},
{name:  "Underground 1",    short:"u1", capacity:5062, coords: [[24.995544825454736,46.501817442050445],[24.995672509041253,46.502240093467236],[24.99549974662936,46.50238721896043],[24.9954490230128,46.502262896822366],[24.995349483878105,46.50233336796024],[24.99541710211617,46.50243488674317],[24.995268707711293,46.5025218903135],[24.99500578764865,46.50223803239476],[24.995174813367786,46.502088845829086],[24.995266839364916,46.50207643554158],[24.995330681158173,46.50201219147377],[24.99533445760298,46.50197075076108]] },
{name:  "Underground 2",    short:"u2",capacity:3164,coords:[  [24.995157918746283,46.50294870772787 ],  [24.995278089195235,46.50344801349998 ],  [24.995018905825347,46.50353506092292 ],  [24.9948893141404,46.503025362083186 ]]},
{name:  "Underground 3",    short:"u3",capacity:1880,coords:[  [24.99633553349315,46.50198526597367 ],  [24.99629419136053,46.50227947310744 ],  [24.9960256265067,46.50222974425222 ],  [24.99606692888727,46.501945886333466 ]]},
{name:  "Underground 4",    short:"u4",capacity:2714,coords:[[  24.996173981159526,  46.50278917194718],[  24.99621154684734,  46.50295493479792],[  24.996162731329207,  46.503102016438504],[  24.99601811336914,  46.503168321578805],[  24.995862205826697,  46.50309578936845],[  24.995804008824624,  46.50295493479792],[  24.99583215327645,  46.502791233019664],[  24.995965521406198,  46.502716639736825],[  24.996113876059024,  46.50274773123449] ]}
]
//{name:"Total patrons",capacity:(150000),coords : "donotdraw"}

neu = {}
Object.keys(refdata).forEach((key) => {
 len = refdata[key].length
 neuden = []
 neuten = []
 neuusa = []
 neutime = []
 
 for (i=0;i<len;i++){

  neuden.push(refdata[key][i].density)
 neuten.push(refdata[key][i].tension) 
 neuusa.push(refdata[key][i].usage) 
 neutime.push(refdata[key][i].zeit)
 }
  
 neu[key]={usage:neuusa,zeit:neutime,density:neuden,tension:neuten}


})



function interpolateUndefined(arr) {
    const nonEmptyIndices = arr.reduce((indices, value, index) => {
      if (value !== null && value !== undefined) {
        indices.push(index);
      }
      return indices;
    }, []);
  
    // If there are less than 2 non-empty entries, return the original array
    if (nonEmptyIndices.length < 2) {
      return arr;
    }
  
    // Interpolate values between non-empty entries
    for (let i = nonEmptyIndices[0] + 1; i < nonEmptyIndices[nonEmptyIndices.length - 1]; i++) {
      const startIndex = Math.max(...nonEmptyIndices.filter((idx) => idx < i));
      const endIndex = Math.min(...nonEmptyIndices.filter((idx) => idx > i));
  
      // Linear interpolation formula
      arr[i] = arr[startIndex] + (arr[endIndex] - arr[startIndex]) * (i - startIndex) / (endIndex - startIndex);
   
    }


    vorher = true
    nachher= false
    for (k=0;k<arr.length;k++){
      if(vorher == true && arr[k] != undefined){vorher=false}
      if(vorher == false && arr[k] == undefined){nachher = true
      
      
        if(nachher = true){
          arr[k] =arr[k-1]
          
          arr[k+1] =arr[k-1]
          arr[k+2] =arr[k-1]
          break
        }
      }
     
     
    }


    return arr;
  }






function make_graphdata_stages(indata,capacity,tager){

  //die indaten sind ein array mit jeweils den obj zeit und usage
  //outdata = new Array(52).fill(undefined)
  bucket_tension = new Array(52).fill(undefined)
  bucket_density = new Array(52).fill(undefined)
  bucket_usage = new Array(52).fill(undefined)
 
  temp = new Date(indata.zeit[0])
  //indata.zeit[0] = temp.getTime()
  //indata.usage[0] = 0 
 
  temp = temp.setHours(15,0,0,0)

  // der fixe wert capacity der in der stages_list manuelll vegeben wurde * die auslastung ergibt die anzahlen
 // capacity =

  for (i=0;i<indata.zeit.length;i++){
 
    entfernungzu15uhr = parseInt(Math.round((indata.zeit[i]-temp)/(15*60*1000)))

   if(entfernungzu15uhr > -1 && entfernungzu15uhr<53){

   if (bucket_density[entfernungzu15uhr] == undefined){
    bucket_density[entfernungzu15uhr] = [indata.density[i]]}
     else{bucket_density[entfernungzu15uhr].push(indata.density[i])}
    
     if (bucket_tension[entfernungzu15uhr] == undefined){
      bucket_tension[entfernungzu15uhr] = [indata.tension[i]]}
       else{bucket_tension[entfernungzu15uhr].push(indata.tension[i])}
     
       if (bucket_usage[entfernungzu15uhr] == undefined){
        bucket_usage[entfernungzu15uhr] = [indata.usage[i]]}
         else{bucket_usage[entfernungzu15uhr].push(indata.usage[i])}
      

    }
  }

  // Function to calculate the average of an array using a for loop
  function calculateAverageWithForLoop(array) {
    if (!array || array.length === 0) {
      return undefined; // Return undefined for empty or undefined arrays
    }
  
    let sum = 0;
    let count = 0;
  
    for (let i = 0; i < array.length; i++) {
      if (typeof array[i] === 'number') {
        sum += array[i];
        count++;  
      }
    }
  
    if (count === 0) {
      return 0//undefined; // Return undefined if all elements were undefined
    }
  
    return sum / count;
  }
  
  // Calculate averages for each sub-array using for loops
function bucky(bucket){  outdata = [];
  for (let i = 0; i < bucket.length; i++) {
    const subArray = bucket[i];
    const average = calculateAverageWithForLoop(subArray);
    outdata.push(average)[0];
  }
  return interpolateUndefined(outdata)
}


temp2=new Date ("2023-12-14T15:00")

  outdata = {density:bucky(bucket_density),usage:bucky(bucket_usage),tension:bucky(bucket_tension),zeit:generateTimeArray(temp2)}
  
  return outdata
  
  }
  

neu2={}
  Object.keys(neu).forEach((key) => {
neu2[key] = make_graphdata_stages(neu[key])
  })


sum_onsite = new Array(53).fill(0)
timp =[] 

for(i=0;i<sum_onsite.length;i++){
    
    pq=0
    Object.keys(neu2).forEach((key) => {
     if(neu2[key].usage[i] != undefined) {    sum_onsite[i] += (neu2[key].usage[i]*stages_list[pq].capacity)/95}
    pq++
    })
    
    }      


    total_people = {usage:sum_onsite,zeit:neu2["Big Beast Left"].zeit}


</script>

</html>